<!DOCTYPE HTML>
<html>
<head>
    <title>Account | Ticket Master</title>
    <link rel="stylesheet" href="assets/css/style.css" />
    <noscript><link rel="stylesheet" href="assets/css/noscript.css"/></noscript>
</head>
<body>
    <!-- Ensure app.js is loaded -->
    <script type="module" src="assets/js/app.js"></script>

    <header class="movie-header">
        <div class="header-inner">
            <a href="home.html">
                <img src="assets/css/images/logo.png" alt="Logo" style="filter: invert(1); max-width: 100px; height: auto;" />
            </a>
            <nav>
                <ul class="nav-menu">
                    <li><a href="movies.html">Movies</a></li>
                    <li><a href="login.html">Account</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <div id="wrapper">
        <!-- Account Info Section -->
        <section class="account-section">
            <div class="account-container">
                <h2>Account Details</h2>
                <p id="account-name"></p>
                <h3>Booking History</h3>
                <ul id="booking-history"></ul>
            </div>
        </section>
    </div>

    <!-- Footer -->
    <footer id="footer" class="wrapper style1-alt">
        <div class="inner">
            <br>Text
        </div>
    </footer>

    <script type="module">
        async function fetchUserProfile() {
            const profile = await getUserProfile();
            document.getElementById('account-name').textContent = `Name: ${profile.name}`;
            const bookings = await getBookingsForUser();
            const historyContainer = document.getElementById('booking-history');
            historyContainer.innerHTML = '';
            bookings.forEach(booking => {
                const listItem = document.createElement('li');
                listItem.textContent = `Movie: ${booking.movie} | Showtime: ${booking.showtime}`;
                historyContainer.appendChild(listItem);
            });
        }

        fetchUserProfile();
    </script>
</body>
</html>
